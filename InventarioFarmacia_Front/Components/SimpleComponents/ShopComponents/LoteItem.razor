@using InventarioFarmacia_Shared.DTOs.Lotes
@rendermode InteractiveServer
<div class="d-flex gap-2 mb-2 w-100">
    <EditForm Model="LoteNuevo" OnValidSubmit="CrearLote" class="w-100">
        <DataAnnotationsValidator />
        <div class="d-flex gap-2">
            <div class="w-25">
                <div class="input-group mb-2">
                    <i class="bi bi-pencil input-group-text"></i>
                    <InputNumber class="form-control" placeholder="Cantidad" @bind-Value="LoteNuevo.Cantidad_Productos"
                        min="0" />
                </div>
                <ValidationMessage For="@(() => LoteNuevo.Cantidad_Productos)" class="text-danger small" />
            </div>
            <div class="d-flex flex-column w-50">
                <div class="input-group">
                    <i class="bi bi-check-circle input-group-text"></i>
                    <InputText class="form-control" placeholder="Ingrese el número de lote"
                        @bind-Value="LoteNuevo.Nro_Lote" />
                </div>
                <ValidationMessage For="@(() => LoteNuevo.Nro_Lote)" class="text-danger small" />
            </div>
            <div class="d-flex flex-column w-25">
                <InputDate class="form-control" @bind-Value="LoteNuevo.Fecha_Vencimiento" />
                <ValidationMessage For="@(() => LoteNuevo.Fecha_Vencimiento)" class="text-danger small" />
            </div>
        </div>

        <div class="d-flex gap-2 mt-2">
            <button class="btn btn-success w-75" type="submit">
                <i class="bi bi-box"></i>
                <span>Crear nuevo lote</span>
            </button>
            <button class="btn btn-outline-danger w-25" @onclick="RemoverLote" type="button">
                <i class="bi bi-trash"></i> Remover
            </button>
        </div>
    </EditForm>
</div>

@code {
    public LoteNuevoDTO LoteNuevo { get; set; } = new();

    protected override void OnInitialized()
    {
        // Inicializar con fecha por defecto
        LoteNuevo.Fecha_Vencimiento = DateOnly.FromDateTime(DateTime.Now.AddMonths(6));
        LoteNuevo.Cantidad_Productos = 1;
    }

    private void CrearLote()
    {
        // Lógica simple para crear lote
        StateHasChanged();
    }

    private void RemoverLote()
    {
        // Lógica simple para remover lote
        StateHasChanged();
    }
}